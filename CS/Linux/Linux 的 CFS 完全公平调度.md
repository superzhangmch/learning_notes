# Linux 的 CFS 完全公平调度

CFS 完全公平调度算法的实现，大概是这样的：

每个进程都有一个变量vruntime，等于是一个进程自己的时钟，如果进程优先级低，那么时钟就走得快，否则走得慢。当需要选择一个进程执行的时候，选这个时钟走得最慢的一个。

这个虚拟时钟是当前的墙上实际时钟的虚拟化。这样一个进程才创建的时候，就会赋予差不多当前时间的一个值。如果进程发生了休眠，当检查其是否可以被调度到的时候，其基本上是会比当前时间早的，因此更容易被调度上。当进程被唤醒并要执行的时候，会把其虚拟时钟同步到和当前实际时间差不多的一个时间；这样每个进程的时间才能总是和当前实际时间差不太远。

一个进程在连续的在cpu上执行的开始与结束点（被切走）之间的这个时间段所经过的时间，会拉伸或缩短，然后加到它的虚拟世界里。这个伸缩比例，就是靠的当前的可运行进程个数，与该进程的优先级来决定。

参考：
- http://blog.chinaunix.net/uid-20543183-id-1930842.html
- http://www.oschina.net/question/234345_48074
