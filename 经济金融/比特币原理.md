### 区块链

要解释比特币，不得不先说到区块链。其实比特币只是基于区块链技术的一个应用。区块链并不只能用于比特币，所以才会有那么多人研究区块链的应用。

通俗讲，可以认为区块链就是个逆向链表——每个区块都有类似指针一样的东西指向上一个区块。但是它牛就牛在，有一套比较可靠的机制能保证，平均地每隔一定时间才会产生一个新的区块，且新的区块产生后，该区块以及上游所有区块上存的所有内容就不可以更改了。而且该机制保证了，一群人无中心地维护这么一条区块链，没人能否认没人都修改得了区块历史内容。大家不得不承认。

每个区块上可以填充你想的任何东西。因为上述的历史内容不可更改性，那么区块就填充上比特币的转账记录好了，于是坚不可催的无中心化的比特币就诞生了。

### 区块链的上述特性是怎么保证的呢？

实际上，上述区块链的各特性都是理想情况。实际中是没法达到百分百保证的，只能是尽量接近。上面说的区块链的安全性在于新生成后区块数据不可更改，具体实现是通过生成新的区块没那么容易来实现的。也就是说，不能随随便便就能生成一个新的区块。

实际上，存在一个叫做“工作量证明”的机制。每个人都有有权且有可能产生新区块，从而把链条拉得更长。但是必须付出一定的成本才能得到真正创建的机会。这保证了不可能接连不断地生成新的区块导致泛滥，可以说有个最小时间间隔。平均一定时间内才产生一个新区块，则在于这个所需工作量是可以动态调的。如果一大群人在竞争，那么必然需要每个人的成功率低，于是每个人需要更长的工作量。

具体实现上，工作量证明就是算hash。对当前区块的内容附加一个随机数的整体算hash。当算出的 hash 值的前导0的个数满足要求的时候，就认为得到了创建新区块的机会了。要求的0的个数越多，则这样的随机数越不容易找到（难度是指数增长的）。动态调节难度的方式是，按之前多少个区块的产生速度，求出本次要求的求导0的个数。

历史不可更改怎么做到的呢？在于算 hash 的时候，会把上一个区块的hash也打包进去。这样整体就串成链了。如果更改了历史区块，那么历史区块的hash就变了。不再能和当前区块所存的hash对得上。

所以要修改历史，必须把从修改点一路修改到当前时刻为止。根据工作量证明机制，想要新生成一个区块都那么难，何况修改历史上某点迄今的多个区块。

另外，因为新生成区块的机会概率是按计算力来分配的。所以如果有一人能持续占据全部算力的一般以上，那么按概率，他就有可能修改整个历史。

### 挖坑
从上可知，区块链要想安全稳定运行，需要的两个条件一是必须有人来持续得做hash那种无聊运算，二十还必须有好多人参与，不能出现寡头。提供计算的人，如果不是能得到什么好处，是不愿意这么做的。所以区块链要整体运行起来，还得有机制能让人愿意提供计算力。

比特币能基于区块链运作起来，就是因为能给提供算力的人带来好处。具体说，提供算力的人当得到机会并创立新区块（也就是把比特币交易信息记入区块的时候）的时候，能得到交易手续费或者能获得新比特币奖赏。手续费当然是从交易中提取的。而新比特币奖赏，则纯粹是无中生有地在这次记账过程中冒出来（所以才说是挖矿，就像新挖出的黄金可以直接当钱用），并写入这次的区块。历史不可更改，大家也都认可（实际上所有比特币都是这么来的，这是比特币的发行过程）。

这样看，所谓比特币挖矿就是帮人记账，同时得到好处。另外也可知，挖矿不在于自己计算力有多强，而在于别人有多弱。

